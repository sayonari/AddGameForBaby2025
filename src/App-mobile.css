/* Mobile and iPhone specific styles */

/* Viewport height fix for mobile browsers */
@supports (-webkit-touch-callout: none) {
  body {
    height: -webkit-fill-available;
  }
  
  .app {
    height: -webkit-fill-available;
  }
}

/* Touch interaction improvements */
@media (hover: none) and (pointer: coarse) {
  /* Increase touch targets */
  .home-button,
  .mute-button,
  .number-button,
  .action-button,
  .mode-button,
  .icon-button {
    -webkit-tap-highlight-color: transparent;
    touch-action: manipulation;
  }
  
  /* Prevent text selection on game elements */
  .game-screen,
  .number-pad,
  .problem-display {
    -webkit-user-select: none;
    user-select: none;
  }
}

/* iOS Safari specific fixes */
@supports (-webkit-appearance: none) and (stroke-color: transparent) {
  .app {
    /* Prevent rubber band scrolling */
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
  }
}

/* Landscape adjustments for phones */
@media (orientation: landscape) and (max-height: 500px) {
  .app-container {
    --design-width: 1024;
    --design-height: 600;
  }
  
  .game-screen {
    height: 500px;
  }
  
  .game-content {
    flex-direction: row;
    gap: 20px;
  }
  
  .problem-display,
  .answer-display {
    flex: 1;
  }
  
  .number-pad {
    flex: 1;
    margin-top: 0;
  }
}

/* Small phones (iPhone SE, etc.) */
@media (max-width: 375px) and (max-height: 667px) {
  .app-container {
    --design-width: 375;
    --design-height: 667;
  }
}

/* Medium phones */
@media (min-width: 376px) and (max-width: 414px) and (max-height: 896px) {
  .app-container {
    --design-width: 414;
    --design-height: 896;
  }
}

/* Large phones and small tablets */
@media (min-width: 415px) and (max-width: 768px) and (orientation: portrait) {
  .app-container {
    --design-width: 768;
    --design-height: 1024;
  }
}

/* Tablets in landscape */
@media (min-width: 769px) and (orientation: landscape) {
  .app-container {
    --design-width: 1024;
    --design-height: 768;
  }
}

/* Ensure interactive elements remain clickable after scaling */
.app-container * {
  /* Prevent issues with scaled touch targets */
  transform-style: preserve-3d;
}

/* Fix for achievement notification positioning */
.achievement-notification {
  position: fixed;
  top: 20px;
  right: 20px;
  /* Account for scaling */
  transform-origin: top right;
}

/* Voice game specific mobile adjustments */
.voice-button {
  /* Ensure voice button is easily tappable */
  min-width: 100px;
  min-height: 100px;
}

/* Scrollbar improvements for touch devices */
@media (hover: none) {
  .shop-screen::-webkit-scrollbar,
  .achievements-screen::-webkit-scrollbar {
    width: 0;
    display: none;
  }
  
  .shop-screen,
  .achievements-screen {
    -webkit-overflow-scrolling: touch;
    scrollbar-width: none;
  }
}

/* Prevent zoom on input focus (iOS) */
@media (hover: none) and (pointer: coarse) {
  input,
  select,
  textarea {
    font-size: 16px !important;
  }
}

/* Safe area insets for devices with notches */
@supports (padding: max(0px)) {
  .app-container {
    padding: env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);
  }
}